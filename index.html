<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Felipe Sotille — Text Scramble</title>

  <!-- Optional mono font (remove if you prefer system monospace) -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@100;400;600&display=swap" rel="stylesheet">

  <style>
    :root{
      --bg:#0b1020; --text:#eaf2ff; --muted:#94a3b8; --accent:#38bdf8;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family:"Roboto Mono",ui-monospace,SFMono-Regular,Menlo,Consolas,monospace;
      background: radial-gradient(1200px 900px at 50% 20%, #172032 0%, #0b1020 60%, #060914 100%) fixed;
      color:var(--text);
      display:grid; place-items:center;
    }
    .container{display:grid; gap:16px; place-items:center; padding:24px; text-align:center}
    .text{font-weight:100; font-size:clamp(20px,3.4vw,42px); line-height:1.3; letter-spacing:.02em}
    .dud{color:var(--muted)}
    .sub{font-size:clamp(12px,1.8vw,16px); color:var(--muted)}
    a{color:var(--accent); text-decoration:none}
    a:focus-visible{outline:2px solid var(--accent); outline-offset:4px; border-radius:4px}
    @media (prefers-reduced-motion: reduce){ .dud{display:none} }
  </style>
</head>
<body>
  <div class="container">
    <div class="text" aria-live="polite"></div>
    <div class="sub">Press <kbd>R</kbd> to replay • <a href="https://github.com/sotille" rel="noopener">github.com/sotille</a></div>
  </div>

  <script>
    // Based on the “Scramble text” pattern from the referenced CodePen. :contentReference[oaicite:2]{index=2}
    class TextScramble {
      constructor(el){ this.el = el; this.chars = '!<>-_\\/[]{}—=+*^?#________'; this.update = this.update.bind(this); }
      setText(newText){
        const oldText = this.el.innerText || "";
        const length = Math.max(oldText.length, newText.length);
        const promise = new Promise(resolve => this.resolve = resolve);
        this.queue = [];
        for (let i = 0; i < length; i++){
          const from = oldText[i] || '';
          const to   = newText[i] || '';
          const start = Math.floor(Math.random() * 40);
          const end   = start + Math.floor(Math.random() * 40);
          this.queue.push({ from, to, start, end });
        }
        cancelAnimationFrame(this.frameRequest);
        this.frame = 0; this.update(); return promise;
      }
      update(){
        let output = '', complete = 0;
        for (let i = 0, n = this.queue.length; i < n; i++){
          let { from, to, start, end, char } = this.queue[i];
          if (this.frame >= end){ complete++; output += to; }
          else if (this.frame >= start){
            if (!char || Math.random() < 0.28){ char = this.randomChar(); this.queue[i].char = char; }
            output += '<span class="dud">' + char + '</span>';
          } else { output += from; }
        }
        this.el.innerHTML = output;
        if (complete === this.queue.length){ this.resolve(); }
        else { this.frameRequest = requestAnimationFrame(this.update); this.frame++; }
      }
      randomChar(){ return this.chars[Math.floor(Math.random() * this.chars.length)]; }
    }

    const phrases = [
      "Felipe Sotille",
      "Tech Lead · Cloud‑Native · Platform Engineering",
      "Kubernetes · Java · Spring · TypeScript · AWS",
      "Open‑source collaborator",
      "Mountains · Nature · Chess · Sci‑Fi"
    ];

    const el = document.querySelector('.text');
    const fx = new TextScramble(el);
    let counter = 0;
    function next(){
      fx.setText(phrases[counter]).then(() => setTimeout(next, 1200));
      counter = (counter + 1) % phrases.length;
    }

    const prefersReduced = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
    if (prefersReduced) el.textContent = phrases[0]; else next();

    // Replay with "R"
    addEventListener('keydown', (e) => (e.key.toLowerCase() === 'r') && next());
  </script>
</body>
</html>
